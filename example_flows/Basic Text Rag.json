{"id":"c6f4717e-f7dd-4c12-a1f5-2b23630d47a5","data":{"nodes":[{"id":"KalavaiLlm-faCeT","type":"genericNode","position":{"x":-1720.2194312352008,"y":-587.5052794494156},"data":{"type":"KalavaiLlm","node":{"template":{"code":{"type":"code","required":true,"placeholder":"","list":false,"show":true,"multiline":true,"value":"import os\nimport json\nfrom typing import Optional, Union\n\nfrom langchain.llms import BaseLLM\nfrom langchain_community.chat_models.openai import ChatOpenAI\n\nfrom langflow import CustomComponent\nfrom langflow.field_typing import BaseLanguageModel, NestedDict\n\n\nclass KalavaiLLMComponent(CustomComponent):\n    display_name = \"KalavaiLLM\"\n    description = \"API for LLM models deployed in Kalavai.\"\n    \n    def _load_endpoints(self):\n        MODEL_ENDPOINTS_FILE = os.getenv(\"MODEL_ENDPOINTS\", \"data/model_endpoints.json\")\n        \n        with open(MODEL_ENDPOINTS_FILE, \"r\") as f:\n            return json.load(f)\n        \n\n    def build_config(self):\n        model_endpoints = self._load_endpoints()\n        api_key = os.getenv(\"MODEL_ENDPOINT_API_KEY\", \"N3E9AGVU7IR9E6QLXMIP6YO330M2D005DH5MN4C6\")\n        return {\n            \"max_tokens\": {\n                \"display_name\": \"Max Tokens\",\n                \"field_type\": \"int\",\n                \"advanced\": False,\n                \"required\": False,\n            },\n            \"model_kwargs\": {\n                \"display_name\": \"Model Kwargs\",\n                \"field_type\": \"NestedDict\",\n                \"advanced\": True,\n                \"required\": False,\n            },\n            \"model_name\": {\n                \"display_name\": \"Model Name\",\n                \"field_type\": \"str\",\n                \"advanced\": False,\n                \"required\": False,\n                \"options\": list(model_endpoints.keys()),\n            },\n            \"kalavai_api_key\": {\n                \"display_name\": \"Kalavai API Key\",\n                \"field_type\": \"str\",\n                \"advanced\": True,\n                \"required\": False,\n                \"password\": True,\n                \"value\": api_key\n            },\n            \"temperature\": {\n                \"display_name\": \"Temperature\",\n                \"field_type\": \"float\",\n                \"advanced\": False,\n                \"required\": False,\n                \"value\": 0.7,\n            },\n        }\n\n    def build(\n        self,\n        max_tokens: Optional[int] = 256,\n        model_kwargs: NestedDict = {},\n        model_name: str = \"Equall/Saul-Instruct-v1\",\n        kalavai_api_key: Optional[str] = None,\n        temperature: float = 0.7,\n    ) -> Union[BaseLanguageModel, BaseLLM]:\n        model_endpoints = self._load_endpoints()\n        return ChatOpenAI(\n            max_tokens=max_tokens,\n            model_kwargs=model_kwargs,\n            model=model_name,\n            base_url=model_endpoints[model_name],\n            api_key=kalavai_api_key,\n            temperature=temperature,\n        )","fileTypes":[],"file_path":"","password":false,"name":"code","advanced":false,"dynamic":true,"info":"","title_case":true},"kalavai_api_key":{"type":"str","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"value":"N3E9AGVU7IR9E6QLXMIP6YO330M2D005DH5MN4C6","fileTypes":[],"file_path":"","password":true,"name":"kalavai_api_key","display_name":"Kalavai API Key","advanced":true,"dynamic":false,"info":"","title_case":true},"max_tokens":{"type":"int","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"value":256,"fileTypes":[],"file_path":"","password":false,"name":"max_tokens","display_name":"Max Tokens","advanced":false,"dynamic":false,"info":"","title_case":true},"model_kwargs":{"type":"NestedDict","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"value":{},"fileTypes":[],"file_path":"","password":false,"name":"model_kwargs","display_name":"Model Kwargs","advanced":true,"dynamic":false,"info":"","title_case":true},"model_name":{"type":"str","required":false,"placeholder":"","list":true,"show":true,"multiline":false,"value":"meta-llama/Meta-Llama-3-8B-Instruct","fileTypes":[],"file_path":"","password":false,"options":["meta-llama/Meta-Llama-3-8B-Instruct","Equall/Saul-Instruct-v1"],"name":"model_name","display_name":"Model Name","advanced":false,"dynamic":false,"info":"","title_case":true},"temperature":{"type":"float","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"value":0.7,"fileTypes":[],"file_path":"","password":false,"name":"temperature","display_name":"Temperature","advanced":false,"dynamic":false,"info":"","rangeSpec":{"min":-1,"max":1,"step":0.1},"title_case":true},"_type":"CustomComponent"},"description":"API for LLM models deployed in Kalavai.","base_classes":["BaseLanguageModel","BaseLLM","BaseLanguageModel"],"display_name":"KalavaiLLM","documentation":"","custom_fields":{"max_tokens":null,"model_kwargs":null,"model_name":null,"kalavai_api_key":null,"temperature":null},"output_types":["BaseLanguageModel","BaseLLM"],"field_formatters":{},"beta":true},"id":"KalavaiLlm-faCeT"},"selected":false,"width":384,"height":543,"positionAbsolute":{"x":-1720.2194312352008,"y":-587.5052794494156},"dragging":false},{"id":"RetrievalQA-59tKk","type":"genericNode","position":{"x":-771.6663492157697,"y":-28.673491727201295},"data":{"type":"RetrievalQA","node":{"template":{"combine_documents_chain":{"type":"BaseCombineDocumentsChain","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"combine_documents_chain","display_name":"Combine Documents Chain","advanced":false,"dynamic":false,"info":"","title_case":true},"memory":{"type":"BaseMemory","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"memory","display_name":"Memory","advanced":false,"dynamic":false,"info":"","title_case":true},"retriever":{"type":"BaseRetriever","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"retriever","display_name":"Retriever","advanced":false,"dynamic":false,"info":"","title_case":true},"code":{"type":"code","required":true,"placeholder":"","list":false,"show":true,"multiline":true,"value":"from typing import Callable, Optional, Union\n\nfrom langchain.chains.combine_documents.base import BaseCombineDocumentsChain\nfrom langchain.chains.retrieval_qa.base import BaseRetrievalQA, RetrievalQA\nfrom langflow import CustomComponent\nfrom langflow.field_typing import BaseMemory, BaseRetriever\n\n\nclass RetrievalQAComponent(CustomComponent):\n    display_name = \"RetrievalQA\"\n    description = \"Chain for question-answering against an index.\"\n\n    def build_config(self):\n        return {\n            \"combine_documents_chain\": {\"display_name\": \"Combine Documents Chain\"},\n            \"retriever\": {\"display_name\": \"Retriever\"},\n            \"memory\": {\"display_name\": \"Memory\", \"required\": False},\n            \"input_key\": {\"display_name\": \"Input Key\", \"advanced\": True},\n            \"output_key\": {\"display_name\": \"Output Key\", \"advanced\": True},\n            \"return_source_documents\": {\"display_name\": \"Return Source Documents\"},\n        }\n\n    def build(\n        self,\n        combine_documents_chain: BaseCombineDocumentsChain,\n        retriever: BaseRetriever,\n        memory: Optional[BaseMemory] = None,\n        input_key: str = \"query\",\n        output_key: str = \"result\",\n        return_source_documents: bool = True,\n    ) -> Union[BaseRetrievalQA, Callable]:\n        return RetrievalQA(\n            combine_documents_chain=combine_documents_chain,\n            retriever=retriever,\n            memory=memory,\n            input_key=input_key,\n            output_key=output_key,\n            return_source_documents=return_source_documents,\n        )\n","fileTypes":[],"file_path":"","password":false,"name":"code","advanced":false,"dynamic":true,"info":"","title_case":true},"input_key":{"type":"str","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"value":"query","fileTypes":[],"file_path":"","password":false,"name":"input_key","display_name":"Input Key","advanced":true,"dynamic":false,"info":"","title_case":true},"output_key":{"type":"str","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"value":"result","fileTypes":[],"file_path":"","password":false,"name":"output_key","display_name":"Output Key","advanced":true,"dynamic":false,"info":"","title_case":true},"return_source_documents":{"type":"bool","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"value":true,"fileTypes":[],"file_path":"","password":false,"name":"return_source_documents","display_name":"Return Source Documents","advanced":false,"dynamic":false,"info":"","title_case":true},"_type":"CustomComponent"},"description":"Chain for question-answering against an index.","base_classes":["BaseRetrievalQA","Chain","Callable"],"display_name":"RetrievalQA","documentation":"","custom_fields":{"combine_documents_chain":null,"retriever":null,"memory":null,"input_key":null,"output_key":null,"return_source_documents":null},"output_types":["BaseRetrievalQA","Callable"],"field_formatters":{},"beta":true},"id":"RetrievalQA-59tKk"},"selected":false,"width":384,"height":502,"positionAbsolute":{"x":-771.6663492157697,"y":-28.673491727201295},"dragging":false},{"id":"CombineDocsChain-10j9l","type":"genericNode","position":{"x":-1235.6632790324795,"y":-254.35230620189577},"data":{"type":"CombineDocsChain","node":{"template":{"llm":{"type":"BaseLanguageModel","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"value":"","fileTypes":[],"file_path":"","password":false,"name":"llm","display_name":"LLM","advanced":false,"dynamic":false,"info":"","title_case":true},"chain_type":{"type":"str","required":true,"placeholder":"","list":true,"show":true,"multiline":false,"value":"stuff","fileTypes":[],"file_path":"","password":false,"options":["stuff","map_reduce","map_rerank","refine"],"name":"chain_type","advanced":false,"dynamic":false,"info":"","title_case":true},"_type":"load_qa_chain"},"description":"Load question answering chain.","base_classes":["BaseCombineDocumentsChain","Callable"],"display_name":"CombineDocsChain","documentation":"","custom_fields":{},"output_types":[],"field_formatters":{},"beta":false},"id":"CombineDocsChain-10j9l"},"selected":false,"width":384,"height":333,"positionAbsolute":{"x":-1235.6632790324795,"y":-254.35230620189577},"dragging":false},{"id":"VectorStoreRetriever-VXtUR","type":"genericNode","position":{"x":-1233.4627706257181,"y":230.0454066470043},"data":{"type":"VectorStoreRetriever","node":{"template":{"vectorstore":{"type":"VectorStore","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"vectorstore","display_name":"Vector Store","advanced":false,"dynamic":false,"info":"","title_case":true},"code":{"type":"code","required":true,"placeholder":"","list":false,"show":true,"multiline":true,"value":"from langchain_core.vectorstores import VectorStoreRetriever\n\nfrom langflow import CustomComponent\nfrom langflow.field_typing import VectorStore\n\n\nclass VectoStoreRetrieverComponent(CustomComponent):\n    display_name = \"VectorStore Retriever\"\n    description = \"A vector store retriever\"\n\n    def build_config(self):\n        return {\n            \"vectorstore\": {\"display_name\": \"Vector Store\", \"type\": VectorStore},\n        }\n\n    def build(self, vectorstore: VectorStore) -> VectorStoreRetriever:\n        return vectorstore.as_retriever()\n","fileTypes":[],"file_path":"","password":false,"name":"code","advanced":false,"dynamic":true,"info":"","title_case":true},"_type":"CustomComponent"},"description":"A vector store retriever","base_classes":["VectorStoreRetriever","BaseRetriever"],"display_name":"VectorStore Retriever","documentation":"","custom_fields":{"vectorstore":null},"output_types":["VectorStoreRetriever"],"field_formatters":{},"beta":true},"id":"VectorStoreRetriever-VXtUR"},"selected":false,"width":384,"height":329,"positionAbsolute":{"x":-1233.4627706257181,"y":230.0454066470043},"dragging":false},{"id":"KalavaiDB-2mb9J","type":"genericNode","position":{"x":-1719.2874905845642,"y":31.07324202210043},"data":{"type":"KalavaiDB","node":{"template":{"documents":{"type":"Document","required":false,"placeholder":"","list":true,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"documents","display_name":"Documents","advanced":false,"dynamic":false,"info":"","title_case":true},"embedding":{"type":"Embeddings","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"embedding","display_name":"Embedding","advanced":false,"dynamic":false,"info":"","title_case":true},"chroma_server_cors_allow_origins":{"type":"str","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"chroma_server_cors_allow_origins","display_name":"Server CORS Allow Origins","advanced":true,"dynamic":false,"info":"","title_case":true},"chroma_server_grpc_port":{"type":"int","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"chroma_server_grpc_port","display_name":"Server gRPC Port","advanced":true,"dynamic":false,"info":"","title_case":true},"chroma_server_host":{"type":"str","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"chroma_server_host","display_name":"Server Host","advanced":true,"dynamic":false,"info":"","title_case":true},"chroma_server_port":{"type":"int","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"chroma_server_port","display_name":"Server Port","advanced":true,"dynamic":false,"info":"","title_case":true},"chroma_server_ssl_enabled":{"type":"bool","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"value":false,"fileTypes":[],"file_path":"","password":false,"name":"chroma_server_ssl_enabled","display_name":"Server SSL Enabled","advanced":true,"dynamic":false,"info":"","title_case":true},"code":{"type":"code","required":true,"placeholder":"","list":false,"show":true,"multiline":true,"value":"\"\"\"\nReference: https://github.com/langflow-ai/langflow/tree/dev/src/backend/base/langflow/components/vectorstores\n\"\"\"\nfrom typing import List, Optional, Union\n\nimport chromadb  # type: ignore\nfrom langchain.embeddings.base import Embeddings\nfrom langchain.schema import BaseRetriever, Document\nfrom langchain_community.vectorstores import VectorStore\nfrom langchain_community.vectorstores.chroma import Chroma\nfrom langflow import CustomComponent\n\n\nclass KalavaiVectorDBComponent(CustomComponent):\n    \"\"\"\n    A custom component for implementing a Vector Store using Chroma.\n    \"\"\"\n\n    display_name: str = \"Kalavai VectorDB\"\n    description: str = \"Implementation of local Vector Store in Kalavai\"\n    documentation = \"https://python.langchain.com/docs/integrations/vectorstores/chroma\"\n    beta: bool = True\n\n    def build_config(self):\n        \"\"\"\n        Builds the configuration for the component.\n\n        Returns:\n        - dict: A dictionary containing the configuration options for the component.\n        \"\"\"\n        return {\n            \"collection_name\": {\"display_name\": \"Collection Name\", \"value\": \"langflow\"},\n            \"persist\": {\"display_name\": \"Persist\"},\n            \"persist_directory\": {\"display_name\": \"Persist Directory\"},\n            \"code\": {\"advanced\": True, \"display_name\": \"Code\"},\n            \"documents\": {\"display_name\": \"Documents\", \"is_list\": True},\n            \"embedding\": {\"display_name\": \"Embedding\"},\n            \"chroma_server_cors_allow_origins\": {\n                \"display_name\": \"Server CORS Allow Origins\",\n                \"advanced\": True,\n            },\n            \"chroma_server_host\": {\"display_name\": \"Server Host\", \"advanced\": True},\n            \"chroma_server_port\": {\"display_name\": \"Server Port\", \"advanced\": True},\n            \"chroma_server_grpc_port\": {\n                \"display_name\": \"Server gRPC Port\",\n                \"advanced\": True,\n            },\n            \"chroma_server_ssl_enabled\": {\n                \"display_name\": \"Server SSL Enabled\",\n                \"advanced\": True,\n            },\n        }\n\n    def build(\n        self,\n        collection_name: str,\n        persist: bool,\n        embedding: Embeddings,\n        chroma_server_ssl_enabled: bool,\n        persist_directory: Optional[str] = None,\n        documents: Optional[List[Document]] = None,\n        chroma_server_cors_allow_origins: Optional[str] = None,\n        chroma_server_host: Optional[str] = None,\n        chroma_server_port: Optional[int] = None,\n        chroma_server_grpc_port: Optional[int] = None,\n    ) -> Union[VectorStore, BaseRetriever]:\n        \"\"\"\n        Builds the Vector Store or BaseRetriever object.\n\n        Args:\n        - collection_name (str): The name of the collection.\n        - persist_directory (Optional[str]): The directory to persist the Vector Store to.\n        - chroma_server_ssl_enabled (bool): Whether to enable SSL for the Chroma server.\n        - persist (bool): Whether to persist the Vector Store or not.\n        - embedding (Optional[Embeddings]): The embeddings to use for the Vector Store.\n        - documents (Optional[Document]): The documents to use for the Vector Store.\n        - chroma_server_cors_allow_origins (Optional[str]): The CORS allow origins for the Chroma server.\n        - chroma_server_host (Optional[str]): The host for the Chroma server.\n        - chroma_server_port (Optional[int]): The port for the Chroma server.\n        - chroma_server_grpc_port (Optional[int]): The gRPC port for the Chroma server.\n\n        Returns:\n        - Union[VectorStore, BaseRetriever]: The Vector Store or BaseRetriever object.\n        \"\"\"\n\n        # Chroma settings\n        chroma_settings = None\n\n        if chroma_server_host is not None:\n            chroma_settings = chromadb.config.Settings(\n                chroma_server_cors_allow_origins=chroma_server_cors_allow_origins or None,\n                chroma_server_host=chroma_server_host,\n                chroma_server_port=chroma_server_port or None,\n                chroma_server_grpc_port=chroma_server_grpc_port or None,\n                chroma_server_ssl_enabled=chroma_server_ssl_enabled,\n            )\n\n        # If documents, then we need to create a Chroma instance using .from_documents\n        if documents is not None and embedding is not None:\n            if len(documents) == 0:\n                raise ValueError(\"If documents are provided, there must be at least one document.\")\n            return Chroma.from_documents(\n                documents=documents,  # type: ignore\n                persist_directory=persist_directory if persist else None,\n                collection_name=collection_name,\n                embedding=embedding,\n                client_settings=chroma_settings,\n            )\n\n        return Chroma(persist_directory=persist_directory, client_settings=chroma_settings)","fileTypes":[],"file_path":"","password":false,"name":"code","advanced":true,"dynamic":true,"info":"","title_case":true},"collection_name":{"type":"str","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"value":"adam","fileTypes":[],"file_path":"","password":false,"name":"collection_name","display_name":"Collection Name","advanced":false,"dynamic":false,"info":"","title_case":true},"persist":{"type":"bool","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"value":false,"fileTypes":[],"file_path":"","password":false,"name":"persist","display_name":"Persist","advanced":false,"dynamic":false,"info":"","title_case":true},"persist_directory":{"type":"str","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"persist_directory","display_name":"Persist Directory","advanced":false,"dynamic":false,"info":"","title_case":true},"_type":"CustomComponent"},"description":"Implementation of local Vector Store in Kalavai","base_classes":["VectorStore","BaseRetriever"],"display_name":"Kalavai VectorDB","documentation":"https://python.langchain.com/docs/integrations/vectorstores/chroma","custom_fields":{"collection_name":null,"persist":null,"embedding":null,"chroma_server_ssl_enabled":null,"persist_directory":null,"documents":null,"chroma_server_cors_allow_origins":null,"chroma_server_host":null,"chroma_server_port":null,"chroma_server_grpc_port":null},"output_types":["VectorStore","BaseRetriever"],"field_formatters":{},"beta":true},"id":"KalavaiDB-2mb9J"},"selected":false,"width":384,"height":556,"positionAbsolute":{"x":-1719.2874905845642,"y":31.07324202210043},"dragging":false},{"id":"KalavaiEmbedding-I0mUX","type":"genericNode","position":{"x":-2218.8533238745167,"y":246.18156069244628},"data":{"type":"KalavaiEmbedding","node":{"template":{"code":{"type":"code","required":true,"placeholder":"","list":false,"show":true,"multiline":true,"value":"import os\n\nimport requests\nfrom langchain_community.embeddings import InfinityEmbeddings\nfrom langflow import CustomComponent\n#from pydantic.v1.types import SecretStr\n\n\n\nclass KalavaiEmbeddingsComponent(CustomComponent):\n    display_name = \"Kalavai Embeddings\"\n    description = \"Kalavai sentence_transformers embedding models, API version.\"\n    documentation = \"https://python.langchain.com/v0.1/docs/integrations/text_embedding/infinity/\"\n    \n    def load_embeddings_url(self):\n        return os.getenv(\"EMBEDDING_API_URL\", \"https://embeddings.test.k8s.mvp.kalavai.net\")\n    \n    def load_models(self):\n        # fetch available models\n        EMBEDDING_API_URL = self.load_embeddings_url()\n        response = requests.get(\n            f\"{EMBEDDING_API_URL}/models\"\n        )\n        models = []\n        for model_specs in response.json()[\"data\"]:\n            models.append(model_specs[\"id\"])\n\n    def build_config(self):\n        models = self.load_models()\n        return {\n            \"model_name\": {\n                \"display_name\": \"Model Name\",\n                \"field_type\": \"str\",\n                \"advanced\": False,\n                \"required\": False,\n                \"options\": models\n            }\n        }\n\n    def build(\n        self,\n        model_name: str,\n    ) -> InfinityEmbeddings:\n        return InfinityEmbeddings(\n            infinity_api_url=self.load_embeddings_url(),\n            model=model_name,\n        )","fileTypes":[],"file_path":"","password":false,"name":"code","advanced":false,"dynamic":true,"info":"","title_case":true},"model_name":{"type":"str","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"model_name","display_name":"Model Name","advanced":false,"dynamic":false,"info":"","title_case":true,"value":"BAAI/bge-large-en-v1.5"},"_type":"CustomComponent"},"description":"Kalavai sentence_transformers embedding models, API version.","base_classes":["InfinityEmbeddings","Embeddings"],"display_name":"Kalavai Embeddings","documentation":"https://python.langchain.com/v0.1/docs/integrations/text_embedding/infinity/","custom_fields":{"model_name":null},"output_types":["InfinityEmbeddings"],"field_formatters":{},"beta":true},"id":"KalavaiEmbedding-I0mUX"},"selected":false,"width":384,"height":395,"positionAbsolute":{"x":-2218.8533238745167,"y":246.18156069244628},"dragging":false},{"id":"CharacterTextSplitter-RDg8e","type":"genericNode","position":{"x":-2209.646314293257,"y":-446.7854102985484},"data":{"type":"CharacterTextSplitter","node":{"template":{"documents":{"type":"Document","required":true,"placeholder":"","list":true,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"documents","display_name":"Documents","advanced":false,"dynamic":false,"info":"","title_case":true},"chunk_overlap":{"type":"int","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"value":200,"fileTypes":[],"file_path":"","password":false,"name":"chunk_overlap","display_name":"Chunk Overlap","advanced":false,"dynamic":false,"info":"","title_case":true},"chunk_size":{"type":"int","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"value":1000,"fileTypes":[],"file_path":"","password":false,"name":"chunk_size","display_name":"Chunk Size","advanced":false,"dynamic":false,"info":"","title_case":true},"code":{"type":"code","required":true,"placeholder":"","list":false,"show":true,"multiline":true,"value":"from typing import List\n\nfrom langchain.text_splitter import CharacterTextSplitter\nfrom langchain_core.documents.base import Document\nfrom langflow import CustomComponent\n\n\nclass CharacterTextSplitterComponent(CustomComponent):\n    display_name = \"CharacterTextSplitter\"\n    description = \"Splitting text that looks at characters.\"\n\n    def build_config(self):\n        return {\n            \"documents\": {\"display_name\": \"Documents\"},\n            \"chunk_overlap\": {\"display_name\": \"Chunk Overlap\", \"default\": 200},\n            \"chunk_size\": {\"display_name\": \"Chunk Size\", \"default\": 1000},\n            \"separator\": {\"display_name\": \"Separator\", \"default\": \"\\n\"},\n        }\n\n    def build(\n        self,\n        documents: List[Document],\n        chunk_overlap: int = 200,\n        chunk_size: int = 1000,\n        separator: str = \"\\n\",\n    ) -> List[Document]:\n        docs = CharacterTextSplitter(\n            chunk_overlap=chunk_overlap,\n            chunk_size=chunk_size,\n            separator=separator,\n        ).split_documents(documents)\n        self.status = docs\n        return docs\n","fileTypes":[],"file_path":"","password":false,"name":"code","advanced":false,"dynamic":true,"info":"","title_case":true},"separator":{"type":"str","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"value":"\\n","fileTypes":[],"file_path":"","password":false,"name":"separator","display_name":"Separator","advanced":false,"dynamic":false,"info":"","title_case":true},"_type":"CustomComponent"},"description":"Splitting text that looks at characters.","base_classes":["Document"],"display_name":"CharacterTextSplitter","documentation":"","custom_fields":{"documents":null,"chunk_overlap":null,"chunk_size":null,"separator":null},"output_types":["Document"],"field_formatters":{},"beta":true},"id":"CharacterTextSplitter-RDg8e"},"selected":false,"width":384,"height":595,"positionAbsolute":{"x":-2209.646314293257,"y":-446.7854102985484},"dragging":false},{"id":"UnstructuredMarkdownLoader-mOjkI","type":"genericNode","position":{"x":-2667.5389235088805,"y":-360.14357198050595},"data":{"type":"UnstructuredMarkdownLoader","node":{"template":{"file_path":{"type":"file","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"value":"","fileTypes":[".md"],"file_path":"/home/atomkins/.cache/langflow/c6f4717e-f7dd-4c12-a1f5-2b23630d47a5/ac1d5d562179d19a7a640f2c7889d6c1d923fc076d794922d49ef354b09d59d7.md","password":false,"name":"file_path","advanced":false,"dynamic":false,"info":"","title_case":true},"metadata":{"type":"dict","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"value":[{"":""}],"fileTypes":[],"file_path":"","password":false,"name":"metadata","display_name":"Metadata","advanced":false,"dynamic":false,"info":"","title_case":true},"_type":"UnstructuredMarkdownLoader"},"description":"Load `Markdown` files using `Unstructured`.","base_classes":["Document"],"display_name":"UnstructuredMarkdownLoader","documentation":"https://python.langchain.com/docs/modules/data_connection/document_loaders/how_to/markdown","custom_fields":{},"output_types":["Document"],"field_formatters":{},"beta":false},"id":"UnstructuredMarkdownLoader-mOjkI"},"selected":false,"width":384,"height":367,"dragging":false,"positionAbsolute":{"x":-2667.5389235088805,"y":-360.14357198050595}}],"edges":[{"source":"KalavaiLlm-faCeT","sourceHandle":"{œbaseClassesœ:[œBaseLanguageModelœ,œBaseLLMœ,œBaseLanguageModelœ],œdataTypeœ:œKalavaiLlmœ,œidœ:œKalavaiLlm-faCeTœ}","target":"CombineDocsChain-10j9l","targetHandle":"{œfieldNameœ:œllmœ,œidœ:œCombineDocsChain-10j9lœ,œinputTypesœ:null,œtypeœ:œBaseLanguageModelœ}","data":{"targetHandle":{"fieldName":"llm","id":"CombineDocsChain-10j9l","inputTypes":null,"type":"BaseLanguageModel"},"sourceHandle":{"baseClasses":["BaseLanguageModel","BaseLLM","BaseLanguageModel"],"dataType":"KalavaiLlm","id":"KalavaiLlm-faCeT"}},"style":{"stroke":"#555"},"className":"stroke-gray-900  stroke-connection","animated":false,"id":"reactflow__edge-KalavaiLlm-faCeT{œbaseClassesœ:[œBaseLanguageModelœ,œBaseLLMœ,œBaseLanguageModelœ],œdataTypeœ:œKalavaiLlmœ,œidœ:œKalavaiLlm-faCeTœ}-CombineDocsChain-10j9l{œfieldNameœ:œllmœ,œidœ:œCombineDocsChain-10j9lœ,œinputTypesœ:null,œtypeœ:œBaseLanguageModelœ}"},{"source":"VectorStoreRetriever-VXtUR","sourceHandle":"{œbaseClassesœ:[œVectorStoreRetrieverœ,œBaseRetrieverœ],œdataTypeœ:œVectorStoreRetrieverœ,œidœ:œVectorStoreRetriever-VXtURœ}","target":"RetrievalQA-59tKk","targetHandle":"{œfieldNameœ:œretrieverœ,œidœ:œRetrievalQA-59tKkœ,œinputTypesœ:null,œtypeœ:œBaseRetrieverœ}","data":{"targetHandle":{"fieldName":"retriever","id":"RetrievalQA-59tKk","inputTypes":null,"type":"BaseRetriever"},"sourceHandle":{"baseClasses":["VectorStoreRetriever","BaseRetriever"],"dataType":"VectorStoreRetriever","id":"VectorStoreRetriever-VXtUR"}},"style":{"stroke":"#555"},"className":"stroke-gray-900  stroke-connection","animated":false,"id":"reactflow__edge-VectorStoreRetriever-VXtUR{œbaseClassesœ:[œVectorStoreRetrieverœ,œBaseRetrieverœ],œdataTypeœ:œVectorStoreRetrieverœ,œidœ:œVectorStoreRetriever-VXtURœ}-RetrievalQA-59tKk{œfieldNameœ:œretrieverœ,œidœ:œRetrievalQA-59tKkœ,œinputTypesœ:null,œtypeœ:œBaseRetrieverœ}"},{"source":"KalavaiDB-2mb9J","sourceHandle":"{œbaseClassesœ:[œVectorStoreœ,œBaseRetrieverœ],œdataTypeœ:œKalavaiDBœ,œidœ:œKalavaiDB-2mb9Jœ}","target":"VectorStoreRetriever-VXtUR","targetHandle":"{œfieldNameœ:œvectorstoreœ,œidœ:œVectorStoreRetriever-VXtURœ,œinputTypesœ:null,œtypeœ:œVectorStoreœ}","data":{"targetHandle":{"fieldName":"vectorstore","id":"VectorStoreRetriever-VXtUR","inputTypes":null,"type":"VectorStore"},"sourceHandle":{"baseClasses":["VectorStore","BaseRetriever"],"dataType":"KalavaiDB","id":"KalavaiDB-2mb9J"}},"style":{"stroke":"#555"},"className":"stroke-gray-900  stroke-connection","animated":false,"id":"reactflow__edge-KalavaiDB-2mb9J{œbaseClassesœ:[œVectorStoreœ,œBaseRetrieverœ],œdataTypeœ:œKalavaiDBœ,œidœ:œKalavaiDB-2mb9Jœ}-VectorStoreRetriever-VXtUR{œfieldNameœ:œvectorstoreœ,œidœ:œVectorStoreRetriever-VXtURœ,œinputTypesœ:null,œtypeœ:œVectorStoreœ}"},{"source":"KalavaiEmbedding-I0mUX","sourceHandle":"{œbaseClassesœ:[œInfinityEmbeddingsœ,œEmbeddingsœ],œdataTypeœ:œKalavaiEmbeddingœ,œidœ:œKalavaiEmbedding-I0mUXœ}","target":"KalavaiDB-2mb9J","targetHandle":"{œfieldNameœ:œembeddingœ,œidœ:œKalavaiDB-2mb9Jœ,œinputTypesœ:null,œtypeœ:œEmbeddingsœ}","data":{"targetHandle":{"fieldName":"embedding","id":"KalavaiDB-2mb9J","inputTypes":null,"type":"Embeddings"},"sourceHandle":{"baseClasses":["InfinityEmbeddings","Embeddings"],"dataType":"KalavaiEmbedding","id":"KalavaiEmbedding-I0mUX"}},"style":{"stroke":"#555"},"className":"stroke-gray-900  stroke-connection","animated":false,"id":"reactflow__edge-KalavaiEmbedding-I0mUX{œbaseClassesœ:[œInfinityEmbeddingsœ,œEmbeddingsœ],œdataTypeœ:œKalavaiEmbeddingœ,œidœ:œKalavaiEmbedding-I0mUXœ}-KalavaiDB-2mb9J{œfieldNameœ:œembeddingœ,œidœ:œKalavaiDB-2mb9Jœ,œinputTypesœ:null,œtypeœ:œEmbeddingsœ}"},{"source":"CombineDocsChain-10j9l","sourceHandle":"{œbaseClassesœ:[œBaseCombineDocumentsChainœ,œCallableœ],œdataTypeœ:œCombineDocsChainœ,œidœ:œCombineDocsChain-10j9lœ}","target":"RetrievalQA-59tKk","targetHandle":"{œfieldNameœ:œcombine_documents_chainœ,œidœ:œRetrievalQA-59tKkœ,œinputTypesœ:null,œtypeœ:œBaseCombineDocumentsChainœ}","data":{"targetHandle":{"fieldName":"combine_documents_chain","id":"RetrievalQA-59tKk","inputTypes":null,"type":"BaseCombineDocumentsChain"},"sourceHandle":{"baseClasses":["BaseCombineDocumentsChain","Callable"],"dataType":"CombineDocsChain","id":"CombineDocsChain-10j9l"}},"style":{"stroke":"#555"},"className":"stroke-gray-900  stroke-connection","animated":false,"id":"reactflow__edge-CombineDocsChain-10j9l{œbaseClassesœ:[œBaseCombineDocumentsChainœ,œCallableœ],œdataTypeœ:œCombineDocsChainœ,œidœ:œCombineDocsChain-10j9lœ}-RetrievalQA-59tKk{œfieldNameœ:œcombine_documents_chainœ,œidœ:œRetrievalQA-59tKkœ,œinputTypesœ:null,œtypeœ:œBaseCombineDocumentsChainœ}"},{"source":"CharacterTextSplitter-RDg8e","sourceHandle":"{œbaseClassesœ:[œDocumentœ],œdataTypeœ:œCharacterTextSplitterœ,œidœ:œCharacterTextSplitter-RDg8eœ}","target":"KalavaiDB-2mb9J","targetHandle":"{œfieldNameœ:œdocumentsœ,œidœ:œKalavaiDB-2mb9Jœ,œinputTypesœ:null,œtypeœ:œDocumentœ}","data":{"targetHandle":{"fieldName":"documents","id":"KalavaiDB-2mb9J","inputTypes":null,"type":"Document"},"sourceHandle":{"baseClasses":["Document"],"dataType":"CharacterTextSplitter","id":"CharacterTextSplitter-RDg8e"}},"style":{"stroke":"#555"},"className":"stroke-gray-900  stroke-connection","animated":false,"id":"reactflow__edge-CharacterTextSplitter-RDg8e{œbaseClassesœ:[œDocumentœ],œdataTypeœ:œCharacterTextSplitterœ,œidœ:œCharacterTextSplitter-RDg8eœ}-KalavaiDB-2mb9J{œfieldNameœ:œdocumentsœ,œidœ:œKalavaiDB-2mb9Jœ,œinputTypesœ:null,œtypeœ:œDocumentœ}"},{"source":"UnstructuredMarkdownLoader-mOjkI","sourceHandle":"{œbaseClassesœ:[œDocumentœ],œdataTypeœ:œUnstructuredMarkdownLoaderœ,œidœ:œUnstructuredMarkdownLoader-mOjkIœ}","target":"CharacterTextSplitter-RDg8e","targetHandle":"{œfieldNameœ:œdocumentsœ,œidœ:œCharacterTextSplitter-RDg8eœ,œinputTypesœ:null,œtypeœ:œDocumentœ}","data":{"targetHandle":{"fieldName":"documents","id":"CharacterTextSplitter-RDg8e","inputTypes":null,"type":"Document"},"sourceHandle":{"baseClasses":["Document"],"dataType":"UnstructuredMarkdownLoader","id":"UnstructuredMarkdownLoader-mOjkI"}},"style":{"stroke":"#555"},"className":"stroke-gray-900  stroke-connection","animated":false,"id":"reactflow__edge-UnstructuredMarkdownLoader-mOjkI{œbaseClassesœ:[œDocumentœ],œdataTypeœ:œUnstructuredMarkdownLoaderœ,œidœ:œUnstructuredMarkdownLoader-mOjkIœ}-CharacterTextSplitter-RDg8e{œfieldNameœ:œdocumentsœ,œidœ:œCharacterTextSplitter-RDg8eœ,œinputTypesœ:null,œtypeœ:œDocumentœ}"}],"viewport":{"x":1719.5905679176226,"y":391.77198653430696,"zoom":0.6155722066724546}},"description":"Use the KalavaiDB, Embeddings and LLM to build a text RAG!","name":"Basic Text Rag","last_tested_version":"0.6.19","is_component":false}